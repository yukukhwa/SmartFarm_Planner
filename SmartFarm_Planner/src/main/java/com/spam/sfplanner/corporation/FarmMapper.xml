<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper 
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
 
 <mapper namespace="com.spam.sfplanner.corporation.FarmMapper">

 	
 <!-- 한개의 농가에 대한 상세정보 -->
  <select id="oneSelectFarm"
       parameterType="String"
       resultType="com.spam.sfplanner.corporation.FarmDb">
       SELECT f_number AS fNumber
          , f_name AS fName
          , f_phone AS fPhone
          , f_doroaddress AS fDoroaddress
          , f_jibunaddress AS fJibunaddress
          , f_party AS fParty
          , f_registdate AS fRegistdate
       FROM sp_farm
       WHERE sp_farm.f_Name=#{fName}
    </select>
 	
 	<!-- 농가의 전체 리스트를 조회 -->
 	<select id="listSelectFarm"
 		resultType="com.spam.sfplanner.corporation.FarmDb">
	 		SELECT f_number AS fNumber
	 			, f_name AS fName
	 		FROM sp_farm
 	</select>
 	
 	<!-- 농가 등록 후 농가의 통합코드pk를 다음 쿼리로 리턴한다 -->
 	<insert id="insertFarm"
 		parameterType="com.spam.sfplanner.user.FarmMemberView">
 		<selectKey resultType="int"
 					keyProperty="fNumber"
 					order="AFTER">
 			SELECT LAST_INSERT_ID()
 		</selectKey>
 		INSERT INTO sp_farm(
 			f_name
 			, f_member_id
 			, f_phone
 			, f_doroaddress
 			, f_jibunaddress
 			, f_party
 			, f_registdate)
		VALUES (
			#{fName}
			, #{fMemberId}
			, #{fPhone}
			, #{fDoroaddress}
			, #{fJibunaddress}
			, #{fParty}
			, NOW())
 	</insert>
 </mapper>